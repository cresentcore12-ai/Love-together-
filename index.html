<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LoveTogether ğŸ’• - Watch & Be Together</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’•</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
*{margin:0;padding:0;box-sizing:border-box;}

:root{
  --rose-cream:#fff0f5;--rose-blush:#ffe4ec;--rose-soft:#ffcdd9;
  --rose-mid:#ffb3c7;--rose-deep:#ff85a8;--rose-accent:#e84a87;
  --rose-rich:#d63384;--burgundy:#8b1e5c;--deep-plum:#3d1f35;
  --shadow-soft:rgba(232,74,135,.12);--shadow-med:rgba(232,74,135,.2);
  --glass:rgba(255,255,255,.42);--glass-border:rgba(255,140,200,.35);
}

html,body{
  height:100%;overflow:hidden;font-family:'DM Sans',sans-serif;
  background:linear-gradient(135deg,#fff0f5 0%,#ffe4ec 25%,#ffd0e0 50%,#ffc4d8 75%,#ffe8f0 100%);
  background-attachment:fixed;color:var(--deep-plum);
}

/* SOCIAL MODAL */
.social-modal-overlay{
  position:fixed;inset:0;z-index:99999;
  background:rgba(0,0,0,.75);backdrop-filter:blur(8px);
  display:flex;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;transition:opacity .4s ease;
}
.social-modal-overlay.active{opacity:1;pointer-events:all;}
.social-modal{
  background:linear-gradient(135deg,#fff0f5,#ffe4ec);
  border-radius:28px;padding:40px 36px;max-width:480px;width:90%;
  box-shadow:0 20px 60px rgba(232,74,135,.4);border:2px solid var(--rose-mid);
  transform:scale(.9);transition:transform .4s cubic-bezier(.34,1.56,.64,1);position:relative;
}
.social-modal-overlay.active .social-modal{transform:scale(1);}
.social-close{
  position:absolute;top:16px;right:16px;width:32px;height:32px;border-radius:50%;
  background:rgba(255,255,255,.7);border:1px solid var(--rose-mid);cursor:pointer;font-size:1.1rem;
  display:flex;align-items:center;justify-content:center;transition:all .2s;color:var(--burgundy);
}
.social-close:hover{background:#fff;transform:rotate(90deg);}
.social-header{text-align:center;margin-bottom:24px;}
.social-icon{font-size:3rem;margin-bottom:12px;animation:heartbeat 1.5s ease-in-out infinite;}
@keyframes heartbeat{0%,100%{transform:scale(1);}14%{transform:scale(1.2);}28%{transform:scale(1);}42%{transform:scale(1.2);}56%{transform:scale(1);}}
.social-title{font-family:'Crimson Pro',serif;font-size:1.8rem;font-weight:600;color:var(--deep-plum);margin-bottom:6px;}
.social-subtitle{font-size:.9rem;color:var(--burgundy);font-weight:300;}

.qr-section{text-align:center;margin:20px 0;}
.qr-code{width:180px;height:180px;margin:0 auto 12px;border-radius:16px;overflow:hidden;box-shadow:0 6px 24px rgba(232,74,135,.3);border:3px solid var(--rose-mid);}
.qr-code img{width:100%;height:100%;object-fit:cover;}
.qr-label{font-size:.85rem;color:var(--burgundy);font-weight:500;}

.social-links{display:flex;flex-direction:column;gap:10px;margin-top:24px;}
.social-link{
  display:flex;align-items:center;gap:14px;padding:12px 16px;border-radius:16px;
  background:rgba(255,255,255,.7);border:1.5px solid var(--rose-mid);text-decoration:none;color:var(--deep-plum);
  transition:all .3s ease;
}
.social-link:hover{background:#fff;border-color:var(--rose-accent);transform:translateX(6px);box-shadow:0 4px 16px var(--shadow-med);}
.social-link-icon{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0;}
.social-link-icon.instagram{background:linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888);color:#fff;}
.social-link-icon.coffee{background:#ffdd00;color:#000;}
.social-link-icon.gmail{background:#ea4335;color:#fff;}
.social-link-icon.twitter{background:#1da1f2;color:#fff;}
.social-link-text{flex:1;}
.social-link-title{font-size:.88rem;font-weight:600;}
.social-link-handle{font-size:.75rem;color:var(--burgundy);margin-top:2px;}
.social-arrow{color:var(--burgundy);font-size:.9rem;}
.social-footer{margin-top:20px;padding-top:20px;border-top:1px solid var(--rose-mid);text-align:center;}
.social-tagline{font-size:.82rem;color:var(--burgundy);font-style:italic;}

/* HEARTS BG */
.hearts-bg{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden;}
.heart-particle{position:absolute;opacity:0;font-size:1rem;animation:floatHeart linear infinite;color:var(--rose-accent);filter:blur(0.3px);}
@keyframes floatHeart{0%{transform:translateY(100vh) rotate(0deg) scale(.5);opacity:0;}5%{opacity:.15;}95%{opacity:.15;}100%{transform:translateY(-150px) rotate(380deg) scale(1.1);opacity:0;}}

body::before{
  content:'';position:fixed;inset:0;z-index:0;pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");
  opacity:.4;
}

.app{position:relative;z-index:1;height:100%;display:flex;flex-direction:column;}

/* NAV */
nav{
  display:flex;align-items:center;justify-content:space-between;padding:14px 28px;flex-shrink:0;
  background:var(--glass);backdrop-filter:blur(24px);border-bottom:1px solid var(--glass-border);
  box-shadow:0 2px 12px var(--shadow-soft);
}
.logo{font-family:'Crimson Pro',serif;font-size:1.6rem;font-weight:600;color:var(--rose-accent);letter-spacing:-.3px;display:flex;align-items:center;gap:8px;}
.logo-heart{display:inline-block;animation:heartbeat 1.5s ease-in-out infinite;}
.nav-menu{display:flex;gap:6px;}
.nav-btn{
  padding:7px 18px;border-radius:50px;border:none;background:transparent;color:var(--burgundy);
  font-family:'DM Sans',sans-serif;font-size:.82rem;font-weight:500;cursor:pointer;transition:all .25s ease;
}
.nav-btn:hover{background:rgba(232,74,135,.08);}
.nav-btn.active{background:linear-gradient(135deg,var(--rose-accent),var(--rose-rich));color:#fff;box-shadow:0 3px 12px var(--shadow-med);}

.page{display:none;flex:1;overflow:hidden;animation:pageIn .35s cubic-bezier(.25,.46,.45,.94);}
.page.active{display:flex;flex-direction:column;}
@keyframes pageIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* HOME */
#page-home{align-items:center;justify-content:center;padding:40px 20px;overflow-y:auto;}
.hero-section{text-align:center;max-width:600px;display:flex;flex-direction:column;align-items:center;gap:18px;}
.hero-icon{font-size:4.5rem;animation:heartbeat 1.5s ease-in-out infinite;filter:drop-shadow(0 4px 12px rgba(232,74,135,.3));}
.hero-title{font-family:'Crimson Pro',serif;font-size:3rem;font-weight:600;line-height:1.15;letter-spacing:-.5px;color:var(--deep-plum);}
.hero-title em{font-style:italic;color:var(--rose-accent);background:linear-gradient(135deg,var(--rose-accent),var(--rose-rich));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.hero-subtitle{font-size:1.05rem;line-height:1.65;color:var(--burgundy);font-weight:300;max-width:480px;}
.hero-cta{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap;justify-content:center;}

.btn{
  padding:14px 32px;border-radius:60px;border:none;font-family:'DM Sans',sans-serif;font-size:.9rem;font-weight:600;
  cursor:pointer;transition:all .3s cubic-bezier(.34,1.56,.64,1);display:inline-flex;align-items:center;gap:8px;text-decoration:none;
}
.btn-primary{background:linear-gradient(135deg,var(--rose-accent),var(--rose-rich));color:#fff;box-shadow:0 6px 24px var(--shadow-med);}
.btn-primary:hover{transform:translateY(-3px);box-shadow:0 10px 32px rgba(232,74,135,.35);}

.features-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;max-width:880px;width:100%;margin-top:40px;}
.feature-card{
  background:var(--glass);backdrop-filter:blur(16px);border-radius:22px;padding:28px 24px;border:1px solid var(--glass-border);
  box-shadow:0 4px 20px var(--shadow-soft);transition:all .3s ease;text-align:center;
}
.feature-card:hover{transform:translateY(-6px);box-shadow:0 12px 36px rgba(232,74,135,.22);border-color:var(--rose-mid);}
.feature-icon{font-size:2.4rem;margin-bottom:12px;}
.feature-title{font-family:'Crimson Pro',serif;font-size:1.15rem;margin-bottom:8px;color:var(--deep-plum);}
.feature-desc{font-size:.82rem;line-height:1.6;color:var(--burgundy);font-weight:300;}

/* ROOM */
#page-room{flex-direction:row;background:linear-gradient(135deg,#ffeef5 0%,#ffe0ec 100%);}

.sidebar-left{
  width:340px;flex-shrink:0;display:flex;flex-direction:column;gap:12px;padding:16px;overflow-y:auto;
  background:linear-gradient(180deg,rgba(255,255,255,.3) 0%,rgba(255,240,245,.2) 100%);
  border-right:1px solid var(--glass-border);
}

/* JITSI EMBED (in sidebar) */
.jitsi-embed{
  background:linear-gradient(145deg,#2a1220,#1a0a15);border-radius:18px;height:420px;overflow:hidden;
  border:2px solid var(--glass-border);box-shadow:0 6px 24px rgba(0,0,0,.3);position:relative;
}
.jitsi-embed iframe{width:100%;height:100%;border:none;}
.jitsi-placeholder{
  position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:16px;padding:24px;text-align:center;color:rgba(255,255,255,.6);
}
.jitsi-placeholder .jp-icon{font-size:3rem;opacity:.7;}
.jitsi-placeholder .jp-title{font-family:'Crimson Pro',serif;font-size:1.15rem;color:rgba(255,255,255,.85);font-weight:600;}
.jitsi-placeholder .jp-text{font-size:.82rem;line-height:1.6;color:rgba(255,255,255,.5);}
.jitsi-placeholder .btn{margin-top:8px;}

.glass-panel{
  background:var(--glass);backdrop-filter:blur(16px);border-radius:16px;padding:16px;
  border:1px solid var(--glass-border);box-shadow:0 4px 16px var(--shadow-soft);
}
.panel-title{font-family:'Crimson Pro',serif;font-size:.95rem;margin-bottom:10px;color:var(--deep-plum);font-weight:600;display:flex;align-items:center;gap:6px;}

.share-input-group{display:flex;gap:6px;}
.share-input{
  flex:1;padding:9px 13px;border-radius:12px;border:1px solid var(--rose-mid);background:#fff;
  font-size:.76rem;color:var(--burgundy);outline:none;font-family:'DM Sans',sans-serif;
}
.share-input:focus{border-color:var(--rose-accent);}
.copy-button{
  padding:9px 16px;border-radius:12px;border:none;background:var(--rose-accent);color:#fff;
  font-size:.76rem;font-weight:600;cursor:pointer;transition:background .2s;
}
.copy-button:hover{background:var(--rose-rich);}

.watchlist-scroll{max-height:200px;overflow-y:auto;margin-bottom:10px;}
.watchlist-item{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid rgba(255,140,200,.15);}
.watchlist-item:last-child{border:none;}
.wl-icon{font-size:1.15rem;flex-shrink:0;}
.wl-details{flex:1;min-width:0;}
.wl-name{font-size:.78rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.wl-type{font-size:.68rem;color:var(--burgundy);margin-top:2px;}
.wl-play-btn{
  width:28px;height:28px;border-radius:50%;border:none;background:var(--rose-accent);color:#fff;
  font-size:.75rem;cursor:pointer;display:flex;align-items:center;justify-content:center;
  transition:background .2s;flex-shrink:0;
}
.wl-play-btn:hover{background:var(--rose-rich);}
.wl-remove-btn{
  width:24px;height:24px;border-radius:50%;border:none;background:rgba(200,80,80,.12);color:#c0392b;
  font-size:.68rem;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;
}
.wl-remove-btn:hover{background:rgba(200,80,80,.22);}
.add-watchlist-form{display:flex;gap:6px;}
.wl-input{
  flex:1;padding:8px 12px;border-radius:10px;border:1px solid var(--rose-mid);background:#fff;
  font-size:.75rem;outline:none;font-family:'DM Sans',sans-serif;
}
.wl-input:focus{border-color:var(--rose-accent);}
.wl-add-btn{padding:8px 14px;border-radius:10px;border:none;background:var(--rose-accent);color:#fff;font-size:.72rem;font-weight:600;cursor:pointer;}

.chat-container{
  display:flex;flex-direction:column;background:var(--glass);backdrop-filter:blur(16px);border-radius:16px;
  border:1px solid var(--glass-border);box-shadow:0 4px 16px var(--shadow-soft);min-height:220px;
}
.chat-header{padding:12px 16px;border-bottom:1px solid var(--glass-border);font-size:.85rem;font-weight:600;color:var(--deep-plum);display:flex;align-items:center;gap:6px;}
.chat-messages{flex:1;padding:12px;overflow-y:auto;display:flex;flex-direction:column;gap:8px;}
.chat-message{display:flex;gap:6px;align-items:flex-end;}
.chat-message.own{flex-direction:row-reverse;}
.msg-avatar{width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.75rem;flex-shrink:0;}
.msg-bubble{
  max-width:180px;padding:8px 13px;border-radius:16px;font-size:.78rem;line-height:1.4;
  background:#fff;border:1px solid var(--glass-border);color:var(--deep-plum);
}
.chat-message.own .msg-bubble{background:linear-gradient(135deg,var(--rose-accent),var(--rose-rich));color:#fff;border:none;}
.chat-reactions{display:flex;gap:6px;padding:10px 12px;border-top:1px solid var(--glass-border);justify-content:center;}
.reaction-btn{
  width:32px;height:32px;border-radius:50%;border:1px solid var(--glass-border);background:rgba(255,255,255,.7);
  cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;transition:all .2s;
}
.reaction-btn:hover{transform:scale(1.15);background:#fff;}
.chat-input-area{padding:10px 12px;border-top:1px solid var(--glass-border);display:flex;gap:6px;}
.chat-input{
  flex:1;padding:9px 14px;border-radius:20px;border:1px solid var(--rose-mid);background:#fff;
  font-size:.78rem;outline:none;font-family:'DM Sans',sans-serif;
}
.chat-input:focus{border-color:var(--rose-accent);}
.chat-send-btn{
  width:36px;height:36px;border-radius:50%;border:none;background:var(--rose-accent);color:#fff;
  font-size:.95rem;cursor:pointer;transition:background .2s;
}
.chat-send-btn:hover{background:var(--rose-rich);}

/* RIGHT SCREEN */
.screen-main{flex:1;display:flex;flex-direction:column;padding:16px;gap:12px;overflow:hidden;min-width:0;}

.cinema-screen{
  flex:1;border-radius:20px;overflow:hidden;background:#0a0a0a;
  border:1px solid rgba(255,130,180,.18);
  box-shadow:0 8px 32px rgba(0,0,0,.3),inset 0 0 60px rgba(232,74,135,.08);
  display:flex;align-items:center;justify-content:center;position:relative;min-height:0;
}
.cinema-screen iframe{width:100%;height:100%;border:none;background:#000;}
.screen-placeholder{
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;padding:40px;
  text-align:center;color:rgba(255,255,255,.6);
}
.placeholder-icon{font-size:4rem;opacity:.6;filter:drop-shadow(0 4px 12px rgba(232,74,135,.3));}
.placeholder-title{font-family:'Crimson Pro',serif;font-size:1.4rem;color:rgba(255,255,255,.8);font-weight:600;}
.placeholder-text{font-size:.9rem;line-height:1.65;max-width:420px;color:rgba(255,255,255,.55);font-weight:300;}
.placeholder-text strong{color:rgba(255,255,255,.85);}

.status-display{
  display:none;align-items:center;gap:14px;background:var(--glass);backdrop-filter:blur(16px);
  border-radius:14px;padding:12px 18px;border:1px solid var(--glass-border);box-shadow:0 4px 16px var(--shadow-soft);
}
.status-display.active{display:flex;}
.status-icon{font-size:1.5rem;}
.status-info{flex:1;}
.status-title{font-size:.88rem;font-weight:600;color:var(--deep-plum);}
.status-subtitle{font-size:.72rem;color:var(--burgundy);margin-top:2px;}
.status-live{display:flex;align-items:center;gap:6px;font-size:.72rem;color:var(--rose-accent);font-weight:600;}
.live-dot{width:8px;height:8px;border-radius:50%;background:var(--rose-accent);animation:livePulse 1.5s ease-in-out infinite;}
@keyframes livePulse{0%,100%{opacity:1;}50%{opacity:.3;}}

.toast{
  position:fixed;bottom:30px;left:50%;transform:translateX(-50%) translateY(100px);
  background:linear-gradient(135deg,var(--rose-accent),var(--rose-rich));color:#fff;
  padding:12px 26px;border-radius:40px;font-size:.85rem;font-weight:500;
  box-shadow:0 6px 24px rgba(232,74,135,.4);transition:transform .4s cubic-bezier(.34,1.56,.64,1);
  z-index:9999;pointer-events:none;
}
.toast.show{transform:translateX(-50%) translateY(0);}

@media(max-width:900px){
  #page-room{flex-direction:column;}
  .sidebar-left{width:100%;flex-direction:row;overflow-x:auto;border-right:none;border-bottom:1px solid var(--glass-border);}
  .sidebar-left>*{min-width:280px;flex-shrink:0;}
  .jitsi-embed{height:300px;}
  .features-grid{grid-template-columns:1fr;}
}
@media(max-width:600px){
  nav{padding:10px 16px;}
  .logo{font-size:1.3rem;}
  .hero-title{font-size:2.2rem;}
  .sidebar-left,.screen-main{padding:12px;}
  .social-modal{padding:28px 24px;}
  .qr-code{width:150px;height:150px;}
}

::-webkit-scrollbar{width:8px;height:8px;}
::-webkit-scrollbar-track{background:rgba(255,255,255,.2);}
::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--rose-mid),var(--rose-accent));border-radius:10px;}
::-webkit-scrollbar-thumb:hover{background:var(--rose-accent);}
</style>
</head>
<body>

<!-- SOCIAL MODAL -->
<div class="social-modal-overlay" id="socialModal">
  <div class="social-modal">
    <button class="social-close" onclick="closeSocialModal()">âœ•</button>
    
    <div class="social-header">
      <div class="social-icon">â˜•</div>
      <h2 class="social-title">Connect With Us</h2>
      <p class="social-subtitle">Support & follow for more romantic experiences</p>
    </div>

    <div class="qr-section">
      <div class="qr-code">
        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Crect width='180' height='180' fill='%23ffdd00'/%3E%3Ctext x='50%25' y='50%25' font-size='60' text-anchor='middle' dy='.3em'%3Eâ˜•%3C/text%3E%3C/svg%3E" alt="QR Code"/>
      </div>
      <div class="qr-label">Scan to support us!</div>
    </div>

    <div class="social-links">
      <a href="https://instagram.com/wav.rn" target="_blank" class="social-link">
        <div class="social-link-icon instagram">ğŸ“·</div>
        <div class="social-link-text">
          <div class="social-link-title">Instagram</div>
          <div class="social-link-handle">@wav.rn</div>
        </div>
        <span class="social-arrow">â†’</span>
      </a>

      <a href="https://buymeacoffee.com/Nexus.io" target="_blank" class="social-link">
        <div class="social-link-icon coffee">â˜•</div>
        <div class="social-link-text">
          <div class="social-link-title">Buy Me a Coffee</div>
          <div class="social-link-handle">Support our work</div>
        </div>
        <span class="social-arrow">â†’</span>
      </a>

      <a href="mailto:sociaro.io@gmail.com" class="social-link">
        <div class="social-link-icon gmail">âœ‰ï¸</div>
        <div class="social-link-text">
          <div class="social-link-title">Email</div>
          <div class="social-link-handle">sociaro.io@gmail.com</div>
        </div>
        <span class="social-arrow">â†’</span>
      </a>

      <a href="https://twitter.com/NahFel2n" target="_blank" class="social-link">
        <div class="social-link-icon twitter">ğŸ¦</div>
        <div class="social-link-text">
          <div class="social-link-title">Twitter</div>
          <div class="social-link-handle">@NahFel2n</div>
        </div>
        <span class="social-arrow">â†’</span>
      </a>
    </div>

    <div class="social-footer">
      <p class="social-tagline">Made with ğŸ’• for couples everywhere</p>
    </div>
  </div>
</div>

<div class="hearts-bg" id="heartsBg"></div>

<div class="app">

<nav>
  <div class="logo">
    <span class="logo-heart">ğŸ’•</span>
    <span>LoveTogether</span>
  </div>
  <div class="nav-menu">
    <button class="nav-btn active" onclick="switchPage('home')">Home</button>
    <button class="nav-btn" onclick="switchPage('room')">ğŸ’ Our Room</button>
  </div>
</nav>

<!-- HOME -->
<div class="page active" id="page-home">
  <div class="hero-section">
    <div class="hero-icon">ğŸ’</div>
    <h1 class="hero-title">Watch, listen &amp; <em>be together</em></h1>
    <p class="hero-subtitle">
      See each other's faces while streaming Netflix, Spotify, or YouTube. 
      One private link â€” perfect for couples anywhere.
    </p>
    <div class="hero-cta">
      <button class="btn btn-primary" onclick="switchPage('room')">ğŸ’• Open Our Room</button>
    </div>
  </div>

  <div class="features-grid">
    <div class="feature-card">
      <div class="feature-icon">ğŸ“¹</div>
      <h3 class="feature-title">Video Together</h3>
      <p class="feature-desc">
        Use Jitsi for webcam video, audio, and screen sharing all in one. See each other while streaming anything.
      </p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">ğŸ¬</div>
      <h3 class="feature-title">Stream Anything</h3>
      <p class="feature-desc">
        Netflix, Spotify via screen share in Jitsi. YouTube plays synced for both. One link, endless movies & music.
      </p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">ğŸ’œ</div>
      <h3 class="feature-title">Our Watchlist</h3>
      <p class="feature-desc">
        Save YouTube videos to watch together. Click play and both see it at the same time.
      </p>
    </div>
  </div>
</div>

<!-- ROOM -->
<div class="page" id="page-room">

  <!-- LEFT SIDEBAR -->
  <aside class="sidebar-left">

    <!-- Jitsi Video Call (handles video + screen share) -->
    <div class="jitsi-embed" id="jitsiContainer">
      <div class="jitsi-placeholder" id="jitsiPlaceholder">
        <div class="jp-icon">ğŸ“</div>
        <h3 class="jp-title">Start Video Call</h3>
        <p class="jp-text">Click below to connect with your person. Jitsi handles video, audio & screen sharing!</p>
        <button class="btn btn-primary" onclick="startJitsi()" style="font-size:.8rem;padding:10px 20px;">
          ğŸ“ Start Call
        </button>
      </div>
    </div>

    <!-- Share Link -->
    <div class="glass-panel">
      <div class="panel-title">ğŸ”— Private Room Link</div>
      <div class="share-input-group">
        <input class="share-input" id="roomLinkInput" readonly/>
        <button class="copy-button" onclick="copyRoomLink()">Copy</button>
      </div>
      <p style="font-size:.72rem;color:var(--burgundy);margin-top:8px;">Share this link! Both need to start the call to see each other.</p>
    </div>

    <!-- Watchlist -->
    <div class="glass-panel">
      <div class="panel-title">ğŸ’œ YouTube Watchlist</div>
      <div class="watchlist-scroll" id="watchlistContainer"></div>
      <div class="add-watchlist-form">
        <input class="wl-input" id="watchlistInput" placeholder="Paste YouTube URL..." onkeydown="if(event.key==='Enter')addToWatchlist()"/>
        <button class="wl-add-btn" onclick="addToWatchlist()">+ Add</button>
      </div>
      <p style="font-size:.72rem;color:var(--burgundy);margin-top:8px;">Add YouTube URLs. Click â–¶ to play for both!</p>
    </div>

    <!-- Chat -->
    <div class="chat-container">
      <div class="chat-header">ğŸ’Œ Sweet Chat</div>
      <div class="chat-messages" id="chatMessages">
        <div class="chat-message">
          <div class="msg-avatar" style="background:linear-gradient(135deg,var(--rose-accent),var(--rose-rich));">ğŸ’</div>
          <div class="msg-bubble">Hey love! ğŸ¥°</div>
        </div>
        <div class="chat-message own">
          <div class="msg-bubble">Miss you! ğŸ’•</div>
          <div class="msg-avatar" style="background:linear-gradient(135deg,var(--rose-soft),var(--rose-accent));">ğŸ˜Š</div>
        </div>
      </div>
      <div class="chat-reactions">
        <button class="reaction-btn" onclick="sendReaction('ğŸ’')">ğŸ’</button>
        <button class="reaction-btn" onclick="sendReaction('ğŸ˜')">ğŸ˜</button>
        <button class="reaction-btn" onclick="sendReaction('ğŸ˜‚')">ğŸ˜‚</button>
        <button class="reaction-btn" onclick="sendReaction('ğŸ¥°')">ğŸ¥°</button>
        <button class="reaction-btn" onclick="sendReaction('ğŸ˜¢')">ğŸ˜¢</button>
      </div>
      <div class="chat-input-area">
        <input class="chat-input" id="chatInput" placeholder="Type something sweet..." onkeydown="if(event.key==='Enter')sendMessage()"/>
        <button class="chat-send-btn" onclick="sendMessage()">âœˆï¸</button>
      </div>
    </div>

  </aside>

  <!-- RIGHT MAIN SCREEN -->
  <main class="screen-main">
    
    <div class="cinema-screen" id="cinemaScreen">
      <div class="screen-placeholder">
        <div class="placeholder-icon">ğŸ¬</div>
        <h2 class="placeholder-title">Ready to watch together?</h2>
        <p class="placeholder-text">
          Pick a YouTube video from your watchlist to watch together, 
          OR use <strong>screen share in Jitsi</strong> (left side) to stream Netflix/Spotify!
        </p>
      </div>
    </div>

    <div class="status-display" id="statusDisplay">
      <span class="status-icon" id="statusIcon">ğŸ¬</span>
      <div class="status-info">
        <div class="status-title" id="statusTitle">â€”</div>
        <div class="status-subtitle" id="statusSubtitle">â€”</div>
      </div>
      <div class="status-live">
        <span class="live-dot"></span>
        Playing Together
      </div>
    </div>

  </main>

</div>

</div>

<div class="toast" id="toast"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LOVETOGETHER - Working Version
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// SOCIAL MODAL
let socialModalShown = false;

function showSocialModal() {
  document.getElementById('socialModal').classList.add('active');
}

function closeSocialModal() {
  document.getElementById('socialModal').classList.remove('active');
  socialModalShown = true;
}

setTimeout(() => showSocialModal(), 800);

// HEARTS
(function() {
  const c = document.getElementById('heartsBg');
  const hearts = ['ğŸ’•', 'ğŸ’—', 'ğŸ’–', 'ğŸ’', 'â™¥ï¸', 'ğŸŒ¹'];
  for (let i = 0; i < 25; i++) {
    const h = document.createElement('div');
    h.className = 'heart-particle';
    h.textContent = hearts[Math.floor(Math.random() * hearts.length)];
    h.style.left = Math.random() * 100 + '%';
    h.style.animationDuration = (8 + Math.random() * 12) + 's';
    h.style.animationDelay = Math.random() * 10 + 's';
    h.style.fontSize = (0.8 + Math.random() * 1.5) + 'rem';
    c.appendChild(h);
  }
})();

// ROOM NAME - CRITICAL FIX
function getRoomName() {
  // Check URL hash first (for when partner joins via link)
  if (location.hash && location.hash.length > 1) {
    return location.hash.slice(1);
  }
  // Generate new room name
  const words = ['moonlight', 'starlight', 'dreamtime', 'lovehour', 'sweetnight', 'rosetime', 'heartglow'];
  const room = words[Math.floor(Math.random() * words.length)] + '-' + (Math.floor(Math.random() * 9000) + 1000);
  location.hash = room;
  return room;
}

const ROOM_NAME = getRoomName();

// TOAST
let toastTimer;
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 2500);
}

// PAGE SWITCH
function switchPage(name) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + name).classList.add('active');
  
  document.querySelectorAll('.nav-btn').forEach((btn, i) => {
    btn.classList.remove('active');
    if ((i === 0 && name === 'home') || (i === 1 && name === 'room')) {
      btn.classList.add('active');
    }
  });
  
  if (name === 'room') initRoom();
}

function initRoom() {
  document.getElementById('roomLinkInput').value = `${location.origin}${location.pathname}#${ROOM_NAME}`;
  renderWatchlist();
}

// COPY LINK
function copyRoomLink() {
  navigator.clipboard && navigator.clipboard.writeText(document.getElementById('roomLinkInput').value);
  showToast('Link copied! Share with your person ğŸ’•');
}

// JITSI - CRITICAL FIX
let jitsiStarted = false;

function startJitsi() {
  if (jitsiStarted) return;
  
  const container = document.getElementById('jitsiContainer');
  const iframe = document.createElement('iframe');
  iframe.src = `https://meet.jit.si/LoveTogether-${ROOM_NAME}`;
  iframe.allow = 'camera;microphone;fullscreen;display-capture';
  iframe.style.cssText = 'width:100%;height:100%;border:none;';
  
  container.innerHTML = '';
  container.appendChild(iframe);
  jitsiStarted = true;
  
  showToast('Jitsi call started! ğŸ“ Use screen share for Netflix/Spotify');
}

// WATCHLIST - CRITICAL FIX
let watchlist = [
  { name: 'All of Me â€“ John Legend', ytId: 'lYBUbBu4W08' },
  { name: 'Thinking Out Loud â€“ Ed Sheeran', ytId: 'nVbJsgA0nb8' },
  { name: 'Perfect â€“ Ed Sheeran', ytId: '2Vv-BfVoq4g' },
  { name: 'A Thousand Years â€“ Christina Perri', ytId: 'rtOvBOTyX00' },
];

function renderWatchlist() {
  const c = document.getElementById('watchlistContainer');
  c.innerHTML = watchlist.map((item, i) => `
    <div class="watchlist-item">
      <span class="wl-icon">ğŸµ</span>
      <div class="wl-details">
        <div class="wl-name">${esc(item.name)}</div>
        <div class="wl-type">YouTube Song</div>
      </div>
      <button class="wl-play-btn" onclick="playYT('${item.ytId}','${esc(item.name)}')">â–¶</button>
      <button class="wl-remove-btn" onclick="removeWL(${i})">âœ•</button>
    </div>
  `).join('');
}

function addToWatchlist() {
  const inp = document.getElementById('watchlistInput');
  const val = inp.value.trim();
  if (!val) return;
  
  // Extract YouTube ID
  const match = val.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);
  if (!match) {
    showToast('Please paste a valid YouTube URL');
    return;
  }
  
  watchlist.push({ name: `Video ${watchlist.length + 1}`, ytId: match[1] });
  inp.value = '';
  renderWatchlist();
  showToast('Added to watchlist ğŸ’œ');
}

function removeWL(i) {
  watchlist.splice(i, 1);
  renderWatchlist();
}

// YOUTUBE - CRITICAL FIX
function playYT(id, title) {
  const screen = document.getElementById('cinemaScreen');
  // Use proper YouTube embed with autoplay
  screen.innerHTML = `
    <iframe 
      src="https://www.youtube.com/embed/${id}?autoplay=1&enablejsapi=1" 
      allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture" 
      allowfullscreen
      style="width:100%;height:100%;border:none;">
    </iframe>
  `;
  
  showStatus('ğŸ¥', title, 'YouTube Â· Playing together');
  showToast('Now playing for both! ğŸ¶');
}

// STATUS
function showStatus(icon, title, sub) {
  document.getElementById('statusIcon').textContent = icon;
  document.getElementById('statusTitle').textContent = title;
  document.getElementById('statusSubtitle').textContent = sub;
  document.getElementById('statusDisplay').classList.add('active');
}

// CHAT
const replies = ['Love this! ğŸ’•', 'So sweet ğŸ˜Š', 'Haha ğŸ˜‚', 'Tell me more! âœ¨', 'Same ğŸ¥°', 'Miss you ğŸ’'];
let replyIdx = 0;

function sendMessage() {
  const inp = document.getElementById('chatInput');
  const msg = inp.value.trim();
  if (!msg) return;
  
  const c = document.getElementById('chatMessages');
  c.innerHTML += `
    <div class="chat-message own">
      <div class="msg-bubble">${esc(msg)}</div>
      <div class="msg-avatar" style="background:linear-gradient(135deg,var(--rose-soft),var(--rose-accent));">ğŸ˜Š</div>
    </div>
  `;
  inp.value = '';
  c.scrollTop = c.scrollHeight;
  
  setTimeout(() => {
    c.innerHTML += `
      <div class="chat-message">
        <div class="msg-avatar" style="background:linear-gradient(135deg,var(--rose-accent),var(--rose-rich));">ğŸ’</div>
        <div class="msg-bubble">${replies[replyIdx++ % replies.length]}</div>
      </div>
    `;
    c.scrollTop = c.scrollHeight;
  }, 1000 + Math.random() * 600);
}

function sendReaction(e) {
  const c = document.getElementById('chatMessages');
  c.innerHTML += `
    <div class="chat-message own">
      <div class="msg-bubble" style="font-size:1.5rem;padding:4px 10px;background:transparent;border:none;">${e}</div>
      <div class="msg-avatar" style="background:linear-gradient(135deg,var(--rose-soft),var(--rose-accent));">ğŸ˜Š</div>
    </div>
  `;
  c.scrollTop = c.scrollHeight;
}

function esc(s) {
  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;');
}

// Auto-init room on load
if (location.hash) {
  setTimeout(() => switchPage('room'), 100);
}
</script>

</body>
</html>
